<app-navbar></app-navbar>

<div class="container-fluid">


<div class="row">
  <div class="col">
      <div class="company-hero">
        <img src="{{company?.logo}}" alt="">
      </div>
    </div>
</div>

<div class="row">
  <div class="col">
    <div class="company-overview">
        <p class="text-center">{{companyName}}</p>
    </div>
  </div>
</div>


<hr>

<!-- A list of all user reviews for company -->

<div class="row">
<section id="reviews">

  <h2> Reviews for <span style="text-transform: capitalize"> {{companyName}} </span> </h2>

    <ul class="" *ngFor="let review of allReviews">

      <!-- <div class="review-row"> -->

          <li class="review-row">

            <!-- User image -->
            <div class="review-user-image" *ngIf="review.createdBy.image">
                <img src="/{{review.createdBy.image.path}}" alt="">
            </div>

            <div class="review-user-image" *ngIf="!review.createdBy.image">
              <a>
                <img src="/assets/glyphicons/user.png" alt="">
              </a>
            </div>

            <!-- Review text -->
            <div class="review-text-wrapper">
              <!-- Review Subject -->
              <div class="subject">
                {{review.subject}}
              </div>

              <!-- Review Comment Body -->
              <div class="comment-body">
                Comment body:  {{review.commentBody}}
              </div>
            </div>


<!-- NOTE: need to check whether printed review matches review of user -->
            <div *ngIf="review._id == intersectedId">
              <button type="button" name="button"> Edit </button>
            </div>


            <!-- Star Rating -->
            <div class="review-stars">
              <star-rating-comp [starType]="'svg'" [hoverEnabled]="false" [readOnly]="true" [rating]="review.starRating"></star-rating-comp>
            </div>

          </li>

      <!-- </div> -->

    </ul>

</section>
</div>



<div class="container" *ngIf="isAuth && !reviewExists">
<div class="row">
  <div class="col">
    <div class="company-reviews">
        <p class="text-center">Company review section</p>

        <!-- User review form -->
        <div class="">

          <form>

              <!-- <star-rating-comp [starType]="'svg'" [hoverEnabled]="true" formControlName="myRatingControl" (onRatingChange)="onRatingChange($event)" [rating]="2.63"></star-rating-comp>
              <h2>{{rating}}</h2> -->

              <star-rating-comp [starType]="'svg'" [hoverEnabled]="true" (onRatingChange)="onRatingChange($event)" [rating]="2.63"></star-rating-comp>
              {{rating}}


            <fieldset class="form-group">
              <label for="subject">Subject</label>
              <input type="text" class="form-control" placeholder="Subject" name="subject" [(ngModel)]="review.subject">
            </fieldset>

            <fieldset>
              <label for="review">Review</label>
              <input type="text" class="form-control comment-body" name="commentBody" [(ngModel)]="review.commentBody">
            </fieldset>

              <!-- <button *ngIf="isAuth" type="button" name="button" class="btn btn-info">EDIT BIO</button> -->
              <button type="submit" class="btn btn-primary" ng-click="submitted=true" (click)="submitUserReview()">Submit</button>
          </form>


        </div>




    </div>
  </div>
</div>
</div>







</div>
